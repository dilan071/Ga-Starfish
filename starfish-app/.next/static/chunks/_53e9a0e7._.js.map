{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Nereida%20Ramos/Desktop/Ga-Starfish/starfish-app/src/app/members/page.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function MembersPage() {\r\n  const [users, setUsers] = useState<any[]>([]);\r\n  const [groupName, setGroupName] = useState('');\r\n  const [selectedUsers, setSelectedUsers] = useState<any[]>([]);\r\n  const router = useRouter();\r\n\r\n  const loadUsers = () => {\r\n    const allUsers = JSON.parse(localStorage.getItem('users') || '[]');\r\n    \r\n    const nonAdmin = allUsers.filter((u: any) => u.role !== 'admin');\r\n    setUsers(nonAdmin);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadUsers();\r\n  }, []);\r\n\r\n  const handleAssignGroupRole = (email: string, newRole: string) => {\r\n    let allUsers = JSON.parse(localStorage.getItem('users') || '[]');\r\n    allUsers = allUsers.map((u: any) => {\r\n      if (u.email === email) {\r\n        return { ...u, groupRole: newRole };\r\n      }\r\n      return u;\r\n    });\r\n    localStorage.setItem('users', JSON.stringify(allUsers));\r\n    alert(`Rol asignado a ${email}: ${newRole}`);\r\n    loadUsers();\r\n  };\r\n\r\n  const toggleUserSelection = (user: any) => {\r\n    const exists = selectedUsers.find(u => u.email === user.email);\r\n    if (exists) {\r\n      setSelectedUsers(selectedUsers.filter(u => u.email !== user.email));\r\n    } else {\r\n      setSelectedUsers([...selectedUsers, user]);\r\n    }\r\n  };\r\n\r\n  const handleCreateGroup = () => {\r\n    if (!groupName.trim()) {\r\n      alert('Debes ingresar un nombre para el grupo');\r\n      return;\r\n    }\r\n    \r\n    const allUsers = JSON.parse(localStorage.getItem('users') || '[]');\r\n    const currentGroupMembers = allUsers.filter((u: any) => u.assignedGroup === groupName.trim());\r\n    \r\n\r\n    const totalMembersAfter = currentGroupMembers.length + selectedUsers.length;\r\n    if (totalMembersAfter > 5) {\r\n      alert(`El grupo \"${groupName}\" no puede tener más de 5 integrantes. Actualmente tiene ${currentGroupMembers.length} miembros.`);\r\n      return;\r\n    }\r\n    \r\n    // Verificar el total de scrum-master en el grupo: \r\n    // Consideramos los que ya estan asignados y los nuevos seleccionados con rol scrum-master\r\n    const currentScrumMasters = currentGroupMembers.filter((u: any) => u.groupRole === 'scrum-master').length;\r\n    const newScrumMasters = selectedUsers.filter((u: any) => u.groupRole === 'scrum-master').length;\r\n    if (currentScrumMasters + newScrumMasters > 1) {\r\n      alert('Solo se permite un scrum-master por grupo');\r\n      return;\r\n    }\r\n    \r\n    // Actualizar la asignación: a cada usuario seleccionado se le asigna el grupo (si no está ya asignado)\r\n    const updatedUsers = allUsers.map((u: any) => {\r\n      if (selectedUsers.find((s: any) => s.email === u.email)) {\r\n        return { ...u, assignedGroup: groupName.trim() };\r\n      }\r\n      return u;\r\n    });\r\n    localStorage.setItem('users', JSON.stringify(updatedUsers));\r\n    alert(`Grupo \"${groupName}\" creado y asignado a los usuarios seleccionados`);\r\n    setGroupName('');\r\n    setSelectedUsers([]);\r\n    loadUsers();\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('currentUser');\r\n    localStorage.setItem('isLoggedIn', 'false');\r\n    router.push('/login');\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '1rem' }}>\r\n      <h2>Panel de Administración (Admin)</h2>\r\n      <button onClick={handleLogout}>Cerrar Sesión</button>\r\n\r\n      <h3>Usuarios Registrados (No Admin):</h3>\r\n      <ul>\r\n        {users.map((u, idx) => (\r\n          <li key={idx} style={{ marginBottom: '1rem' }}>\r\n            <strong>{u.email}</strong> – Rol en grupo: {u.groupRole || 'N/A'} – Grupo: {u.assignedGroup || 'N/A'}\r\n            <br />\r\n            <label>Asignar rol en grupo:</label>\r\n            <select\r\n              value={u.groupRole || ''}\r\n              onChange={e => handleAssignGroupRole(u.email, e.target.value)}\r\n            >\r\n              <option value=\"\">Ninguno</option>\r\n              <option value=\"scrum-master\">Scrum Master</option>\r\n              <option value=\"desarrollador\">Desarrollador</option>\r\n            </select>\r\n            <br />\r\n            <button onClick={() => toggleUserSelection(u)}>\r\n              {selectedUsers.find(s => s.email === u.email) ? 'Quitar del grupo' : 'Agregar al grupo'}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <h3>Crear Grupo</h3>\r\n      <div>\r\n        <input \r\n          type=\"text\"\r\n          placeholder=\"Nombre del grupo\"\r\n          value={groupName}\r\n          onChange={e => setGroupName(e.target.value)}\r\n        />\r\n        <button onClick={handleCreateGroup}>Crear y Asignar Grupo</button>\r\n      </div>\r\n\r\n      <h4>Usuarios seleccionados:</h4>\r\n      <ul>\r\n        {selectedUsers.map((u, idx) => (\r\n          <li key={idx}>{u.email} – Rol: {u.groupRole || 'No asignado'}</li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Nereida%20Ramos/Desktop/Ga-Starfish/starfish-app/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}