{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Nereida%20Ramos/Desktop/Ga-Starfish/starfish-app/src/app/vote-actions/page.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface ActionsMap { \r\n  [category: string]: string[] \r\n}\r\ninterface VotesMap { \r\n  [key: string]: number \r\n}\r\ninterface UserVotesMap { \r\n  [email: string]: string \r\n}\r\n\r\nexport default function VoteActions() {\r\n  const [actions, setActions] = useState<ActionsMap>({});\r\n  const [votes, setVotes] = useState<VotesMap>({});\r\n  const [userVotes, setUserVotes] = useState<UserVotesMap>({});\r\n  const [currentUser, setCurrentUser] = useState<{ email: string } | null>(null);\r\n\r\n  // Función para obtener avatar de un email\r\n  const getAvatar = (email: string) => {\r\n    const allUsers = JSON.parse(localStorage.getItem('users') || '[]');\r\n    const found = allUsers.find((u: any) => u.email === email);\r\n    return found?.avatar || '/default-avatar.png';\r\n  };\r\n\r\n  // Carga inicial: usuario, acciones, votos globales y votos/abstenciones de usuarios\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('currentUser');\r\n    if (storedUser) setCurrentUser(JSON.parse(storedUser));\r\n\r\n    const storedActions = localStorage.getItem('actions');\r\n    if (storedActions) setActions(JSON.parse(storedActions));\r\n\r\n    const storedVotes = localStorage.getItem('votes');\r\n    setVotes(storedVotes ? JSON.parse(storedVotes) : {});\r\n\r\n    const storedUserVotes = localStorage.getItem('userVotes');\r\n    setUserVotes(storedUserVotes ? JSON.parse(storedUserVotes) : {});\r\n  }, []);\r\n\r\n  if (!currentUser) return <div>Cargando usuario...</div>;\r\n\r\n  const userEmail = currentUser.email;\r\n  const userAction = userVotes[userEmail];\r\n  const hasAbstained = userAction === 'abstain';\r\n  const hasVoted     = !!userAction && userAction !== 'abstain';\r\n\r\n  // Guardar votos globales\r\n  const saveVotes = (updated: VotesMap) => {\r\n    setVotes(updated);\r\n    localStorage.setItem('votes', JSON.stringify(updated));\r\n  };\r\n  // Guardar voto/abstención del usuario\r\n  const saveUserVotes = (updated: UserVotesMap) => {\r\n    setUserVotes(updated);\r\n    localStorage.setItem('userVotes', JSON.stringify(updated));\r\n  };\r\n\r\n  // Handler de votar\r\n  const handleVote = (category: string, idx: number) => {\r\n    if (hasVoted || hasAbstained) return;\r\n    const key = `${category}-${idx}`;\r\n    const updatedVotes = { ...votes, [key]: (votes[key] || 0) + 1 };\r\n    saveVotes(updatedVotes);\r\n    saveUserVotes({ ...userVotes, [userEmail]: key });\r\n  };\r\n\r\n  // Handler de abstenerme\r\n  const handleAbstain = () => {\r\n    if (hasVoted || hasAbstained) return;\r\n    saveUserVotes({ ...userVotes, [userEmail]: 'abstain' });\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '1rem' }}>\r\n      <div style={{ display: 'flex', alignItems: 'center', marginBottom: '1rem' }}>\r\n        <img\r\n          src={getAvatar(currentUser.email)}\r\n          alt=\"Mi Avatar\"\r\n          style={{ width: '40px', height: '40px', borderRadius: '50%', marginRight: '0.5rem' }}\r\n        />\r\n        <h2>Votar por Acciones</h2>\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleAbstain}\r\n        disabled={hasVoted || hasAbstained}\r\n        style={{ marginBottom: '1rem' }}\r\n      >\r\n        {hasAbstained ? 'Ya te abstuviste' : 'Me abstengo de votar'}\r\n      </button>\r\n\r\n      {Object.keys(actions).map(category => (\r\n        <div key={category} style={{ marginBottom: '1.5rem' }}>\r\n          <h3>{category}</h3>\r\n          <ul style={{ listStyle: 'none', padding: 0 }}>\r\n            {actions[category].map((actionText, idx) => {\r\n              const actionKey = `${category}-${idx}`;\r\n              return (\r\n                <li\r\n                  key={actionKey}\r\n                  style={{ display: 'flex', alignItems: 'center', marginBottom: '0.5rem' }}\r\n                >\r\n                  <img\r\n                    src={getAvatar(currentUser.email)}\r\n                    alt=\"Mi Avatar\"\r\n                    style={{ width: '32px', height: '32px', borderRadius: '50%', marginRight: '0.5rem' }}\r\n                  />\r\n                  <div style={{ flex: 1 }}>{actionText}</div>\r\n                  <div style={{ marginLeft: '1rem' }}>\r\n                    Votos: {votes[actionKey] || 0}\r\n                    <button\r\n                      onClick={() => handleVote(category, idx)}\r\n                      disabled={hasVoted || hasAbstained}\r\n                      style={{ marginLeft: '0.5rem' }}\r\n                    >\r\n                      {hasVoted ? 'Ya votaste' : 'Votar'}\r\n                    </button>\r\n                  </div>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}