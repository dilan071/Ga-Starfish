{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Nereida%20Ramos/Desktop/Ga-Starfish-2/starfish-app/src/app/profile/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, ChangeEvent } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function ProfilePage() {\r\n  const [currentUser, setCurrentUser] = useState<any>(null);\r\n  const [preview, setPreview] = useState<string | null>(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const u = JSON.parse(localStorage.getItem('currentUser') || 'null');\r\n    if (!u) {\r\n      router.push('/login');\r\n      return;\r\n    }\r\n    setCurrentUser(u);\r\n    setPreview(u.avatar || null);\r\n  }, [router]);\r\n\r\n  const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      setPreview(reader.result as string);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (!preview || !currentUser) return;\r\n    const all = JSON.parse(localStorage.getItem('users') || '[]');\r\n    const updated = all.map((u: any) =>\r\n      u.email === currentUser.email ? { ...u, avatar: preview } : u\r\n    );\r\n    localStorage.setItem('users', JSON.stringify(updated));\r\n    const me = { ...currentUser, avatar: preview };\r\n    localStorage.setItem('currentUser', JSON.stringify(me));\r\n    setCurrentUser(me);\r\n    alert('Avatar guardado');\r\n  };\r\n\r\n  if (!currentUser)\r\n    return <div className=\"p-6 text-center text-gray-600\">Cargando perfil...</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto p-6\">\r\n      <div className=\"bg-white shadow-lg rounded-2xl p-6 space-y-6\">\r\n        <h2 className=\"text-2xl font-bold text-center\">Mi Perfil</h2>\r\n        <p className=\"text-center text-sm text-gray-700\">\r\n          <strong>Email:</strong> {currentUser.email}\r\n        </p>\r\n\r\n        <div className=\"flex justify-center\">\r\n          {preview ? (\r\n            <img\r\n              src={preview}\r\n              alt=\"Avatar\"\r\n              className=\"w-24 h-24 rounded-full object-cover\"\r\n            />\r\n          ) : (\r\n            <div className=\"w-24 h-24 rounded-full bg-gray-300 flex items-center justify-center text-sm text-gray-600\">\r\n              Sin avatar\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={handleFileChange}\r\n          className=\"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200\"\r\n        />\r\n\r\n        <button\r\n          onClick={handleSave}\r\n          disabled={!preview}\r\n          className={`w-full py-2 px-4 rounded text-white font-semibold ${\r\n            preview ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-400 cursor-not-allowed'\r\n          }`}\r\n        >\r\n          Guardar Avatar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAO;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACtD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,IAAI,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,kBAAkB;QAC5D,IAAI,CAAC,GAAG;YACN,OAAO,IAAI,CAAC;YACZ;QACF;QACA,eAAe;QACf,WAAW,EAAE,MAAM,IAAI;IACzB,GAAG;QAAC;KAAO;IAEX,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM;QACX,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG;YACd,WAAW,OAAO,MAAM;QAC1B;QACA,OAAO,aAAa,CAAC;IACvB;IAEA,MAAM,aAAa;QACjB,IAAI,CAAC,WAAW,CAAC,aAAa;QAC9B,MAAM,MAAM,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,YAAY;QACxD,MAAM,UAAU,IAAI,GAAG,CAAC,CAAC,IACvB,EAAE,KAAK,KAAK,YAAY,KAAK,GAAG;gBAAE,GAAG,CAAC;gBAAE,QAAQ;YAAQ,IAAI;QAE9D,aAAa,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC;QAC7C,MAAM,KAAK;YAAE,GAAG,WAAW;YAAE,QAAQ;QAAQ;QAC7C,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;QACnD,eAAe;QACf,MAAM;IACR;IAEA,IAAI,CAAC,aACH,qBAAO,8OAAC;QAAI,WAAU;kBAAgC;;;;;;IAExD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAiC;;;;;;8BAC/C,8OAAC;oBAAE,WAAU;;sCACX,8OAAC;sCAAO;;;;;;wBAAe;wBAAE,YAAY,KAAK;;;;;;;8BAG5C,8OAAC;oBAAI,WAAU;8BACZ,wBACC,8OAAC;wBACC,KAAK;wBACL,KAAI;wBACJ,WAAU;;;;;6CAGZ,8OAAC;wBAAI,WAAU;kCAA4F;;;;;;;;;;;8BAM/G,8OAAC;oBACC,MAAK;oBACL,QAAO;oBACP,UAAU;oBACV,WAAU;;;;;;8BAGZ,8OAAC;oBACC,SAAS;oBACT,UAAU,CAAC;oBACX,WAAW,CAAC,kDAAkD,EAC5D,UAAU,kCAAkC,kCAC5C;8BACH;;;;;;;;;;;;;;;;;AAMT","debugId":null}}]
}