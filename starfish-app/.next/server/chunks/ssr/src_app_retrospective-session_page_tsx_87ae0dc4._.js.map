{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Nereida%20Ramos/Desktop/Ga-Starfish/starfish-app/src/app/retrospective-session/page.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect } from 'react';\r\n\r\nexport default function RetrospectiveSessionPage() {\r\n  const [retrospective, setRetrospective] = useState<any>(null);\r\n  const [actionText, setActionText] = useState('');\r\n  const [hasVoted, setHasVoted] = useState(false);\r\n  const [showQuestions, setShowQuestions] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState<any>(null);\r\n\r\n  // Cargar retrospectiva y usuario actual\r\n  useEffect(() => {\r\n    const storedRetro = localStorage.getItem('retrospective');\r\n    if (storedRetro) {\r\n      setRetrospective(JSON.parse(storedRetro));\r\n    }\r\n    const user = JSON.parse(localStorage.getItem('currentUser') || 'null');\r\n    setCurrentUser(user);\r\n  }, []);\r\n\r\n  // Revisar si el usuario ya ha votado\r\n  useEffect(() => {\r\n    if (retrospective && currentUser && retrospective.votes) {\r\n      if (retrospective.votes[currentUser.email]) {\r\n        setHasVoted(true);\r\n      }\r\n    }\r\n  }, [retrospective, currentUser]);\r\n\r\n  const handleAddAction = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!actionText.trim()) return;\r\n\r\n    const newAction = {\r\n      id: Date.now().toString(),\r\n      text: actionText.trim(),\r\n      createdBy: currentUser?.email || 'desconocido',\r\n      voteCount: 0\r\n    };\r\n\r\n    const updatedRetro = {\r\n      ...retrospective,\r\n      actions: retrospective.actions ? [...retrospective.actions, newAction] : [newAction],\r\n      votes: retrospective.votes || {}\r\n    };\r\n\r\n    localStorage.setItem('retrospective', JSON.stringify(updatedRetro));\r\n    setRetrospective(updatedRetro);\r\n    setActionText('');\r\n  };\r\n\r\n  const handleVote = (actionId: string) => {\r\n    if (!currentUser) return;\r\n    if (retrospective.votes && retrospective.votes[currentUser.email]) {\r\n      alert('Ya has votado');\r\n      return;\r\n    }\r\n    const updatedActions = retrospective.actions.map((action: any) => {\r\n      if (action.id === actionId) {\r\n        return { ...action, voteCount: action.voteCount + 1 };\r\n      }\r\n      return action;\r\n    });\r\n    const updatedVotes = { ...retrospective.votes, [currentUser.email]: actionId };\r\n\r\n    const updatedRetro = {\r\n      ...retrospective,\r\n      actions: updatedActions,\r\n      votes: updatedVotes\r\n    };\r\n\r\n    localStorage.setItem('retrospective', JSON.stringify(updatedRetro));\r\n    setRetrospective(updatedRetro);\r\n    setHasVoted(true);\r\n  };\r\n\r\n  // Ejemplo de mapeo de preguntas (puedes ajustarlo según tus necesidades)\r\n  const questionsMapping: { [key: string]: string[] } = {\r\n    'FSH1': ['Pregunta 1 para FSH1', 'Pregunta 2 para FSH1'],\r\n    'FSH2': ['Pregunta 1 para FSH2', 'Pregunta 2 para FSH2'],\r\n    'FSH3': ['Pregunta 1 para FSH3', 'Pregunta 2 para FSH3'],\r\n  };\r\n\r\n  const toggleQuestions = () => {\r\n    setShowQuestions(!showQuestions);\r\n  };\r\n\r\n  if (!retrospective) return <div>No hay retrospectiva activa.</div>;\r\n\r\n  return (\r\n    <div style={{ padding: '1rem' }}>\r\n      <h2>Retrospectiva: {retrospective.title}</h2>\r\n      <p>{retrospective.description}</p>\r\n      {retrospective.fsh && (\r\n        <p>\r\n          FSH: <span style={{ color: 'blue' }}>{retrospective.fsh}</span>\r\n        </p>\r\n      )}\r\n\r\n      <hr />\r\n      <h3>Agregar Acción</h3>\r\n      <form onSubmit={handleAddAction}>\r\n        <input \r\n          type=\"text\"\r\n          placeholder=\"Escribe tu acción\"\r\n          value={actionText}\r\n          onChange={e => setActionText(e.target.value)}\r\n        />\r\n        <button type=\"submit\">Agregar Acción</button>\r\n      </form>\r\n\r\n      <hr />\r\n      <h3>Acciones Agregadas</h3>\r\n      {retrospective.actions && retrospective.actions.length > 0 ? (\r\n        <ul>\r\n          {retrospective.actions.map((action: any) => (\r\n            <li key={action.id}>\r\n              {action.text} <em>({action.createdBy})</em> - Votos: {action.voteCount}\r\n              {!hasVoted && currentUser && (\r\n                <button onClick={() => handleVote(action.id)}>Votar</button>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>No se han agregado acciones aún.</p>\r\n      )}\r\n\r\n      <hr />\r\n      <button onClick={toggleQuestions}>\r\n        {showQuestions ? 'Ocultar Preguntas' : 'Ver Preguntas'}\r\n      </button>\r\n      {showQuestions && retrospective.fsh && (\r\n        <div>\r\n          <h3>Preguntas para {retrospective.fsh}:</h3>\r\n          <ul>\r\n            {(questionsMapping[retrospective.fsh] || []).map((q, index) => (\r\n              <li key={index}>{q}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}